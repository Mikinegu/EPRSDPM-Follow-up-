{"file_contents":{"next.config.js":{"content":"/** @type {import('next').NextConfig} */\nconst nextConfig = {}\n\nmodule.exports = nextConfig\n","size_bytes":92},"app/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { toast } from 'sonner'\nimport Link from 'next/link'\n\ninterface Staff {\n  id: string\n  name: string\n}\n\ninterface DL {\n  id: string\n  name: string\n}\n\ninterface Site {\n  id: string\n  name: string\n  staff: Staff[]\n  dls: DL[]\n}\n\nexport default function Home() {\n  const [date, setDate] = useState('')\n  const [sites, setSites] = useState<Site[]>([])\n  const [selectedSite, setSelectedSite] = useState<Site | null>(null)\n  const [staffAttendance, setStaffAttendance] = useState<Record<string, boolean>>({})\n  const [dlAttendance, setDlAttendance] = useState<Record<string, boolean>>({})\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    const today = new Date().toISOString().split('T')[0]\n    setDate(today)\n\n    fetchSites()\n  }, [])\n\n  const fetchSites = async () => {\n    try {\n      const response = await fetch('/api/sites')\n      const data = await response.json()\n      setSites(data)\n    } catch (error) {\n      console.error('Error fetching sites:', error)\n      toast.error('Failed to fetch sites')\n    }\n  }\n\n  const handleSiteChange = (siteId: string) => {\n    const site = sites.find(s => s.id === siteId)\n    setSelectedSite(site || null)\n    setStaffAttendance({})\n    setDlAttendance({})\n  }\n\n  const toggleStaffAttendance = (staffId: string) => {\n    setStaffAttendance(prev => ({\n      ...prev,\n      [staffId]: !prev[staffId]\n    }))\n  }\n\n  const toggleDlAttendance = (dlId: string) => {\n    setDlAttendance(prev => ({\n      ...prev,\n      [dlId]: !prev[dlId]\n    }))\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!selectedSite) {\n      toast.error('Please select a site')\n      return\n    }\n\n    setLoading(true)\n\n    try {\n      const response = await fetch('/api/attendance', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          date,\n          siteId: selectedSite.id,\n          staffAttendance: selectedSite.staff.map(staff => ({\n            staffId: staff.id,\n            present: staffAttendance[staff.id] || false,\n          })),\n          dlAttendance: selectedSite.dls.map(dl => ({\n            dlId: dl.id,\n            present: dlAttendance[dl.id] || false,\n          })),\n        }),\n      })\n\n      if (!response.ok) throw new Error('Failed to submit attendance')\n\n      toast.success('Attendance submitted successfully!')\n      setSelectedSite(null)\n      setStaffAttendance({})\n      setDlAttendance({})\n    } catch (error) {\n      console.error('Error submitting attendance:', error)\n      toast.error('Failed to submit attendance')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const staffPresentCount = selectedSite?.staff.filter(s => staffAttendance[s.id]).length || 0\n  const dlPresentCount = selectedSite?.dls.filter(d => dlAttendance[d.id]).length || 0\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8 px-4\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"mb-6 flex justify-between items-center\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">Entoto Peacock Manpower Follow-Up Sheet</h1>\n          <Link \n            href=\"/dashboard\"\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            View Dashboard\n          </Link>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"bg-white rounded-lg shadow-md p-6 space-y-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Date</label>\n            <input\n              type=\"date\"\n              value={date}\n              onChange={(e) => setDate(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Site Location</label>\n            <select\n              value={selectedSite?.id || ''}\n              onChange={(e) => handleSiteChange(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n              required\n            >\n              <option value=\"\">Select a site</option>\n              {sites.map(site => (\n                <option key={site.id} value={site.id}>{site.name}</option>\n              ))}\n            </select>\n          </div>\n\n          {selectedSite && (\n            <>\n              <div className=\"bg-gray-50 rounded-lg p-6\">\n                <div className=\"flex justify-between items-center mb-4\">\n                  <h2 className=\"text-xl font-semibold text-gray-900\">Staff Attendance</h2>\n                  <span className=\"text-sm text-gray-600\">\n                    Present: {staffPresentCount} / {selectedSite.staff.length}\n                  </span>\n                </div>\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\">\n                  {selectedSite.staff.map(staff => (\n                    <button\n                      key={staff.id}\n                      type=\"button\"\n                      onClick={() => toggleStaffAttendance(staff.id)}\n                      className={`px-4 py-3 rounded-lg font-medium transition-colors ${\n                        staffAttendance[staff.id]\n                          ? 'bg-green-500 text-white hover:bg-green-600'\n                          : 'bg-white border-2 border-gray-300 text-gray-700 hover:border-gray-400'\n                      }`}\n                    >\n                      {staff.name}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"bg-gray-50 rounded-lg p-6\">\n                <div className=\"flex justify-between items-center mb-4\">\n                  <h2 className=\"text-xl font-semibold text-gray-900\">DL Attendance</h2>\n                  <span className=\"text-sm text-gray-600\">\n                    Present: {dlPresentCount} / {selectedSite.dls.length}\n                  </span>\n                </div>\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\">\n                  {selectedSite.dls.map(dl => (\n                    <button\n                      key={dl.id}\n                      type=\"button\"\n                      onClick={() => toggleDlAttendance(dl.id)}\n                      className={`px-4 py-3 rounded-lg font-medium transition-colors ${\n                        dlAttendance[dl.id]\n                          ? 'bg-green-500 text-white hover:bg-green-600'\n                          : 'bg-white border-2 border-gray-300 text-gray-700 hover:border-gray-400'\n                      }`}\n                    >\n                      {dl.name}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\n              >\n                {loading ? 'Submitting...' : 'Submit Attendance'}\n              </button>\n            </>\n          )}\n        </form>\n      </div>\n    </div>\n  )\n}\n","size_bytes":7463},"prisma/seed.ts":{"content":"import { PrismaClient } from '@prisma/client'\n\nconst prisma = new PrismaClient()\n\nasync function main() {\n  await prisma.staffAttendance.deleteMany()\n  await prisma.dLAttendance.deleteMany()\n  await prisma.attendanceRecord.deleteMany()\n  await prisma.staff.deleteMany()\n  await prisma.dL.deleteMany()\n  await prisma.site.deleteMany()\n\n  const sites = [\n    {\n      name: 'Entoto Main',\n      staff: ['John Doe', 'Jane Smith', 'Bob Johnson', 'Alice Williams', 'Charlie Brown'],\n      dls: ['Driver Alex', 'Driver Mike', 'Driver Sarah']\n    },\n    {\n      name: 'Peacock Villa',\n      staff: ['Emma Davis', 'Michael Chen', 'Sophia Rodriguez', 'Liam Taylor'],\n      dls: ['Driver Tom', 'Driver Lisa']\n    },\n    {\n      name: 'Entoto Hills',\n      staff: ['Olivia Martinez', 'Noah Anderson', 'Ava Thomas', 'William Jackson', 'Isabella White', 'James Harris'],\n      dls: ['Driver David', 'Driver Emma', 'Driver Robert']\n    },\n    {\n      name: 'Forest Lodge',\n      staff: ['Mia Martin', 'Lucas Thompson', 'Charlotte Garcia'],\n      dls: ['Driver John', 'Driver Mary']\n    }\n  ]\n\n  for (const siteData of sites) {\n    const site = await prisma.site.create({\n      data: {\n        name: siteData.name,\n      },\n    })\n\n    for (const staffName of siteData.staff) {\n      await prisma.staff.create({\n        data: {\n          name: staffName,\n          siteId: site.id,\n        },\n      })\n    }\n\n    for (const dlName of siteData.dls) {\n      await prisma.dL.create({\n        data: {\n          name: dlName,\n          siteId: site.id,\n        },\n      })\n    }\n\n    console.log(`Created site: ${site.name} with ${siteData.staff.length} staff and ${siteData.dls.length} DLs`)\n  }\n}\n\nmain()\n  .then(async () => {\n    await prisma.$disconnect()\n  })\n  .catch(async (e) => {\n    console.error(e)\n    await prisma.$disconnect()\n    process.exit(1)\n  })\n","size_bytes":1845},"app/api/sites/route.ts":{"content":"import { NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport async function GET() {\n  try {\n    const sites = await prisma.site.findMany({\n      include: {\n        staff: true,\n        dls: true,\n      },\n      orderBy: {\n        name: 'asc',\n      },\n    })\n\n    return NextResponse.json(sites)\n  } catch (error) {\n    console.error('Error fetching sites:', error)\n    return NextResponse.json({ error: 'Failed to fetch sites' }, { status: 500 })\n  }\n}\n","size_bytes":482},"postcss.config.js":{"content":"module.exports = {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":82},"lib/prisma.ts":{"content":"import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n","size_bytes":279},"app/api/dashboard/route.ts":{"content":"import { NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport async function GET(request: Request) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const view = searchParams.get('view')\n    const siteFilter = searchParams.get('site')\n    const dateFilter = searchParams.get('date')\n\n    if (view === 'staff') {\n      const staff = await prisma.staff.findMany({\n        where: siteFilter ? { siteId: siteFilter } : undefined,\n        include: {\n          site: true,\n          attendance: {\n            include: {\n              attendanceRecord: true,\n            },\n            where: dateFilter ? { attendanceRecord: { date: dateFilter } } : undefined,\n            orderBy: {\n              attendanceRecord: {\n                date: 'desc',\n              },\n            },\n          },\n        },\n      })\n\n      return NextResponse.json(staff)\n    } else if (view === 'dl') {\n      const dls = await prisma.dL.findMany({\n        where: siteFilter ? { siteId: siteFilter } : undefined,\n        include: {\n          site: true,\n          attendance: {\n            include: {\n              attendanceRecord: true,\n            },\n            where: dateFilter ? { attendanceRecord: { date: dateFilter } } : undefined,\n            orderBy: {\n              attendanceRecord: {\n                date: 'desc',\n              },\n            },\n          },\n        },\n      })\n\n      return NextResponse.json(dls)\n    } else {\n      const records = await prisma.attendanceRecord.findMany({\n        where: {\n          ...(siteFilter && { siteId: siteFilter }),\n          ...(dateFilter && { date: dateFilter }),\n        },\n        include: {\n          site: true,\n          staffAttendance: true,\n          dlAttendance: true,\n        },\n        orderBy: {\n          date: 'desc',\n        },\n      })\n\n      return NextResponse.json(records)\n    }\n  } catch (error) {\n    console.error('Error fetching dashboard data:', error)\n    return NextResponse.json({ error: 'Failed to fetch dashboard data' }, { status: 500 })\n  }\n}\n","size_bytes":2055},"replit.md":{"content":"# Entoto Peacock Manpower Follow-Up Sheet\n\n## Overview\n\nThe Entoto Peacock Manpower Follow-Up Sheet is a Next.js 14 web application designed to track staff and daily laborer (DL) attendance across multiple construction or service sites. The application provides a simple form-based interface for recording daily attendance and a dashboard for viewing historical attendance records and individual worker attendance patterns.\n\nThe system manages multiple sites (e.g., Entoto Main, Peacock Villa, Entoto Hills, Forest Lodge), each with their own roster of staff members and daily laborers. Users can submit daily attendance forms and view aggregated attendance data through various filtering options.\n\n## Recent Changes\n\n**November 12, 2025**: Initial project creation\n- Set up Next.js 14 with App Router, TypeScript, and Tailwind CSS\n- Configured Prisma ORM with PostgreSQL database (Replit managed)\n- Created attendance tracking system with main form and dashboard\n- Implemented API routes for data management\n- Seeded database with 4 sample sites, 18 staff members, and 10 DL workers\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework**: Next.js 14 with App Router\n- The application uses Next.js 14's App Router pattern for file-based routing\n- Client-side interactivity is implemented using React hooks (`useState`, `useEffect`)\n- Pages are marked with `'use client'` directive for client-side rendering where interactivity is needed\n\n**Styling**: Tailwind CSS\n- Utility-first CSS framework for rapid UI development\n- Custom CSS variables defined in `globals.css` for theming (`--background`, `--foreground`)\n- Configuration in `tailwind.config.ts` includes content paths for all components and pages\n- Green accent color (#10b981) for present status, responsive grid layouts\n\n**UI Components**:\n- Toast notifications using Sonner library for user feedback\n- Form-based attendance tracking interface on the main page with toggle buttons\n- Dashboard with tabbed interface for viewing different data perspectives (forms, staff, DL)\n- Responsive design works on both mobile and desktop\n\n**TypeScript**: Full TypeScript implementation\n- Strict type checking enabled in `tsconfig.json`\n- Interfaces defined for all major data structures (Staff, DL, Site, AttendanceRecord)\n- Path aliases configured (`@/*`) for cleaner imports\n\n### Backend Architecture\n\n**API Routes**: Next.js API Routes (serverless functions)\n- `/api/sites` - Retrieves all sites with their associated staff and DLs\n- `/api/attendance` - POST endpoint for submitting attendance records, GET for retrieving records\n- `/api/dashboard` - GET endpoint with query parameters for filtered data views (staff/DL attendance with site and date filters)\n\n**Database**: Prisma ORM with PostgreSQL\n- Prisma Client for type-safe database queries\n- PostgreSQL database managed by Replit (Neon-backed)\n- Schema includes core entities: Site, Staff, DL, AttendanceRecord, StaffAttendance, DLAttendance\n- Relationship model: Sites have many Staff and DLs; AttendanceRecords link to Sites and contain multiple StaffAttendance and DLAttendance records\n\n**Data Model Design**:\n- **Site**: Represents physical locations (Entoto Main, Peacock Villa, etc.)\n- **Staff/DL**: Workers assigned to specific sites\n- **AttendanceRecord**: Daily attendance submission per site with date\n- **StaffAttendance/DLAttendance**: Individual attendance entries (present/absent) linked to workers and attendance records\n\n**Singleton Pattern**: Database connection\n- Prisma Client instantiated as singleton in `lib/prisma.ts`\n- Global reference prevents multiple instances in development (hot reloading)\n- Conditional instantiation based on `NODE_ENV`\n\n### Deployment Configuration\n\n**Platform**: Vercel-compatible\n- Custom port configuration (5000) for development and production\n- Host binding to `0.0.0.0` for network accessibility\n- Build process includes Prisma client generation (`prisma generate`)\n- Postinstall hook ensures Prisma client is generated after dependency installation\n\n**Build Process**:\n1. Install dependencies\n2. Generate Prisma client (postinstall hook)\n3. Build Next.js application\n4. Deploy serverless functions and static assets\n\n## External Dependencies\n\n### Database\n- **Prisma** (v5.7.1): ORM for database management\n  - `@prisma/client`: Runtime query builder\n  - `prisma`: CLI for migrations and schema management\n- **Database Provider**: PostgreSQL (Replit managed, Neon-backed)\n\n### UI Framework & Styling\n- **Next.js** (v14.2.18): React framework with App Router, API routes, and server-side rendering\n- **React** (v18.3.1): UI library\n- **Tailwind CSS** (v3.4.0): Utility-first CSS framework\n- **Sonner** (v1.4.0): Toast notification library for user feedback\n\n### Development Tools\n- **TypeScript** (v5): Type safety and developer experience\n- **ESLint** (v8): Code linting with Next.js configuration\n- **PostCSS** (v8.4.32): CSS processing for Tailwind\n- **Autoprefixer** (v10.4.16): Automatic vendor prefixing for CSS\n\n### Seed Data\n- Database seeding script (`prisma/seed.ts`) populates initial data:\n  - 4 sites with realistic names\n  - Staff members (3-6 per site)\n  - Daily laborers/drivers (2-3 per site)\n- Seed data provides development and testing foundation\n\n## Key Features\n\n### Main Attendance Form (/)\n- Auto-filled date (editable)\n- Site location dropdown\n- Dynamic loading of staff and DL lists based on selected site\n- Toggle buttons for marking attendance (green = present, gray = absent)\n- Real-time counters showing present/total for staff and DLs\n- Form submission with success notification\n- Form reset after submission\n\n### Dashboard (/dashboard)\n- **Form List Tab**: Shows all submitted attendance records with date, site, and present/absent counts\n- **Staff Attendance Tab**: Person-based view showing each staff member's attendance history\n- **DL Attendance Tab**: Person-based view showing each DL's attendance history\n- Filtering by date and site across all tabs\n- Responsive table layouts with hover effects\n- Loading states for better UX\n\n## Future Enhancements (Suggested by Architect)\n\n1. Add unique constraint for (siteId, date) to prevent duplicate daily submissions\n2. Implement server-side validation of attendance payloads\n3. Add automated tests for API endpoints and UI flows\n4. Implement CSV/JSON export functionality\n5. Add user authentication for admin access\n","size_bytes":6452},"app/dashboard/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\n\ninterface AttendanceRecord {\n  id: string\n  date: string\n  site: {\n    id: string\n    name: string\n  }\n  staffAttendance: Array<{ present: boolean }>\n  dlAttendance: Array<{ present: boolean }>\n}\n\ninterface StaffMember {\n  id: string\n  name: string\n  site: {\n    name: string\n  }\n  attendance: Array<{\n    present: boolean\n    attendanceRecord: {\n      date: string\n    }\n  }>\n}\n\ninterface DLMember {\n  id: string\n  name: string\n  site: {\n    name: string\n  }\n  attendance: Array<{\n    present: boolean\n    attendanceRecord: {\n      date: string\n    }\n  }>\n}\n\nexport default function Dashboard() {\n  const [activeTab, setActiveTab] = useState<'forms' | 'staff' | 'dl'>('forms')\n  const [formRecords, setFormRecords] = useState<AttendanceRecord[]>([])\n  const [staffData, setStaffData] = useState<StaffMember[]>([])\n  const [dlData, setDlData] = useState<DLMember[]>([])\n  const [dateFilter, setDateFilter] = useState('')\n  const [siteFilter, setSiteFilter] = useState('')\n  const [sites, setSites] = useState<Array<{ id: string; name: string }>>([])\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    fetchSites()\n  }, [])\n\n  useEffect(() => {\n    fetchData()\n  }, [activeTab, dateFilter, siteFilter])\n\n  const fetchSites = async () => {\n    try {\n      const response = await fetch('/api/sites')\n      const data = await response.json()\n      setSites(data)\n    } catch (error) {\n      console.error('Error fetching sites:', error)\n    }\n  }\n\n  const fetchData = async () => {\n    setLoading(true)\n    try {\n      const params = new URLSearchParams()\n      if (dateFilter) params.append('date', dateFilter)\n      if (siteFilter) params.append('site', siteFilter)\n\n      if (activeTab === 'forms') {\n        const response = await fetch(`/api/dashboard?${params}`)\n        const data = await response.json()\n        setFormRecords(data)\n      } else if (activeTab === 'staff') {\n        params.append('view', 'staff')\n        const response = await fetch(`/api/dashboard?${params}`)\n        const data = await response.json()\n        setStaffData(data)\n      } else if (activeTab === 'dl') {\n        params.append('view', 'dl')\n        const response = await fetch(`/api/dashboard?${params}`)\n        const data = await response.json()\n        setDlData(data)\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8 px-4\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"mb-6 flex justify-between items-center\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">Attendance Dashboard</h1>\n          <Link \n            href=\"/\"\n            className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n          >\n            Back to Form\n          </Link>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n          <div className=\"flex flex-wrap gap-4 mb-4\">\n            <div className=\"flex-1 min-w-[200px]\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Filter by Date</label>\n              <input\n                type=\"date\"\n                value={dateFilter}\n                onChange={(e) => setDateFilter(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n            </div>\n            <div className=\"flex-1 min-w-[200px]\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Filter by Site</label>\n              <select\n                value={siteFilter}\n                onChange={(e) => setSiteFilter(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"\">All Sites</option>\n                {sites.map(site => (\n                  <option key={site.id} value={site.id}>{site.name}</option>\n                ))}\n              </select>\n            </div>\n            <div className=\"flex items-end\">\n              <button\n                onClick={() => {\n                  setDateFilter('')\n                  setSiteFilter('')\n                }}\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\"\n              >\n                Clear Filters\n              </button>\n            </div>\n          </div>\n\n          <div className=\"border-b border-gray-200\">\n            <nav className=\"flex space-x-4\">\n              <button\n                onClick={() => setActiveTab('forms')}\n                className={`px-4 py-2 font-medium transition-colors ${\n                  activeTab === 'forms'\n                    ? 'border-b-2 border-blue-600 text-blue-600'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                Form List\n              </button>\n              <button\n                onClick={() => setActiveTab('staff')}\n                className={`px-4 py-2 font-medium transition-colors ${\n                  activeTab === 'staff'\n                    ? 'border-b-2 border-blue-600 text-blue-600'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                Staff Attendance\n              </button>\n              <button\n                onClick={() => setActiveTab('dl')}\n                className={`px-4 py-2 font-medium transition-colors ${\n                  activeTab === 'dl'\n                    ? 'border-b-2 border-blue-600 text-blue-600'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                DL Attendance\n              </button>\n            </nav>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent\"></div>\n            <p className=\"mt-4 text-gray-600\">Loading...</p>\n          </div>\n        ) : (\n          <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n            {activeTab === 'forms' && (\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 border-b border-gray-200\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Site</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Staff Present</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">DL Present</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {formRecords.map((record) => {\n                      const staffPresent = record.staffAttendance.filter(a => a.present).length\n                      const staffTotal = record.staffAttendance.length\n                      const dlPresent = record.dlAttendance.filter(a => a.present).length\n                      const dlTotal = record.dlAttendance.length\n\n                      return (\n                        <tr key={record.id} className=\"hover:bg-gray-50\">\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{record.date}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{record.site.name}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <span className=\"text-green-600 font-medium\">{staffPresent}</span> / {staffTotal}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <span className=\"text-green-600 font-medium\">{dlPresent}</span> / {dlTotal}\n                          </td>\n                        </tr>\n                      )\n                    })}\n                  </tbody>\n                </table>\n                {formRecords.length === 0 && (\n                  <div className=\"text-center py-12 text-gray-500\">\n                    No attendance records found\n                  </div>\n                )}\n              </div>\n            )}\n\n            {activeTab === 'staff' && (\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 border-b border-gray-200\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Staff Name</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Site</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Attendance History</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {staffData.map((staff) => (\n                      <tr key={staff.id} className=\"hover:bg-gray-50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{staff.name}</td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{staff.site.name}</td>\n                        <td className=\"px-6 py-4 text-sm text-gray-900\">\n                          {staff.attendance.length === 0 ? (\n                            <span className=\"text-gray-500\">No records</span>\n                          ) : (\n                            <div className=\"space-y-1\">\n                              {staff.attendance.slice(0, 5).map((record, index) => (\n                                <div key={index} className=\"flex items-center gap-2\">\n                                  <span className=\"text-gray-600\">{record.attendanceRecord.date}:</span>\n                                  <span className={`px-2 py-1 rounded text-xs font-medium ${\n                                    record.present ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                                  }`}>\n                                    {record.present ? 'Present' : 'Absent'}\n                                  </span>\n                                </div>\n                              ))}\n                            </div>\n                          )}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n                {staffData.length === 0 && (\n                  <div className=\"text-center py-12 text-gray-500\">\n                    No staff records found\n                  </div>\n                )}\n              </div>\n            )}\n\n            {activeTab === 'dl' && (\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 border-b border-gray-200\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">DL Name</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Site</th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Attendance History</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {dlData.map((dl) => (\n                      <tr key={dl.id} className=\"hover:bg-gray-50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{dl.name}</td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{dl.site.name}</td>\n                        <td className=\"px-6 py-4 text-sm text-gray-900\">\n                          {dl.attendance.length === 0 ? (\n                            <span className=\"text-gray-500\">No records</span>\n                          ) : (\n                            <div className=\"space-y-1\">\n                              {dl.attendance.slice(0, 5).map((record, index) => (\n                                <div key={index} className=\"flex items-center gap-2\">\n                                  <span className=\"text-gray-600\">{record.attendanceRecord.date}:</span>\n                                  <span className={`px-2 py-1 rounded text-xs font-medium ${\n                                    record.present ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                                  }`}>\n                                    {record.present ? 'Present' : 'Absent'}\n                                  </span>\n                                </div>\n                              ))}\n                            </div>\n                          )}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n                {dlData.length === 0 && (\n                  <div className=\"text-center py-12 text-gray-500\">\n                    No DL records found\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n","size_bytes":13874},"app/globals.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: #ffffff;\n  --foreground: #171717;\n}\n\nbody {\n  color: var(--foreground);\n  background: var(--background);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n}\n\n@layer utilities {\n  .text-balance {\n    text-wrap: balance;\n  }\n}\n","size_bytes":366},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nconst config: Config = {\n  content: [\n    \"./pages/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"./components/**/*.{js,ts,jsx,tsx,mdx}\",\n    \"./app/**/*.{js,ts,jsx,tsx,mdx}\",\n  ],\n  theme: {\n    extend: {\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n      },\n    },\n  },\n  plugins: [],\n};\nexport default config;\n","size_bytes":395},"app/api/attendance/route.ts":{"content":"import { NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json()\n    const { date, siteId, staffAttendance, dlAttendance } = body\n\n    const attendanceRecord = await prisma.attendanceRecord.create({\n      data: {\n        date,\n        siteId,\n        staffAttendance: {\n          create: staffAttendance.map((item: { staffId: string; present: boolean }) => ({\n            staffId: item.staffId,\n            present: item.present,\n          })),\n        },\n        dlAttendance: {\n          create: dlAttendance.map((item: { dlId: string; present: boolean }) => ({\n            dlId: item.dlId,\n            present: item.present,\n          })),\n        },\n      },\n      include: {\n        staffAttendance: {\n          include: {\n            staff: true,\n          },\n        },\n        dlAttendance: {\n          include: {\n            dl: true,\n          },\n        },\n      },\n    })\n\n    return NextResponse.json(attendanceRecord)\n  } catch (error) {\n    console.error('Error creating attendance record:', error)\n    return NextResponse.json({ error: 'Failed to create attendance record' }, { status: 500 })\n  }\n}\n\nexport async function GET() {\n  try {\n    const records = await prisma.attendanceRecord.findMany({\n      include: {\n        site: true,\n        staffAttendance: {\n          include: {\n            staff: true,\n          },\n        },\n        dlAttendance: {\n          include: {\n            dl: true,\n          },\n        },\n      },\n      orderBy: {\n        date: 'desc',\n      },\n    })\n\n    return NextResponse.json(records)\n  } catch (error) {\n    console.error('Error fetching attendance records:', error)\n    return NextResponse.json({ error: 'Failed to fetch attendance records' }, { status: 500 })\n  }\n}\n","size_bytes":1837},"app/layout.tsx":{"content":"import type { Metadata } from \"next\";\nimport { Toaster } from \"sonner\";\nimport \"./globals.css\";\n\nexport const metadata: Metadata = {\n  title: \"Entoto Peacock Manpower Follow-Up Sheet\",\n  description: \"Staff and DL attendance tracking system\",\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\">\n      <body>\n        {children}\n        <Toaster position=\"top-center\" richColors />\n      </body>\n    </html>\n  );\n}\n","size_bytes":495}},"version":2}